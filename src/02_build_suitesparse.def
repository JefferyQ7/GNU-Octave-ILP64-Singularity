Bootstrap: localimage
From: 01_build_openblas.sif

%post
    mkdir -p /tmp/build \
    && cd    /tmp/build \
    && wget "https://github.com/DrTimothyAldenDavis/SuiteSparse/archive/v5.7.1.tar.gz" \
    && tar -xf       v5.7.1.tar.gz \
    && cd SuiteSparse-5.7.1 \
    && make -j4 library \
                LAPACK= \
                BLAS=-lopenblas \
                UMFPACK_CONFIG=-D'LONGBLAS=long' \
                CHOLMOD_CONFIG=-D'LONGBLAS=long' \
                LDFLAGS='-L/usr/lib -L/tmp/build/SuiteSparse-5.7.1/lib' \
                CMAKE_OPTIONS=-D'CMAKE_INSTALL_PREFIX=/usr' \
    && make install \
            INSTALL=/usr \
            INSTALL_DOC=/tmp/doc \
            LAPACK= \
            BLAS=-lopenblas \
            LDFLAGS='-L/usr/lib -L/tmp/build/SuiteSparse-5.7.1/lib' \
    && rm -rf /tmp/build
